{"version":3,"file":"mdb-wysiwyg.js","sources":["../../../projects/mdb-wysiwyg/src/lib/mdb-defaults.ts","../../../projects/mdb-wysiwyg/src/lib/mdb-wysiwyg.component.ts","../../../projects/mdb-wysiwyg/src/lib/mdb-wysiwyg.module.ts","../../../projects/mdb-wysiwyg/src/public_api.ts","../../../projects/mdb-wysiwyg/src/mdb-wysiwyg.ts"],"sourcesContent":["\nexport const TEXT_STYLE_ITEMS = [\n  {type: 'paragraph', selector: 'p', text: 'Paragraph'},\n  {type: 'heading', selector: 'h1', text: 'Heading'},\n  {type: 'heading', selector: 'h2', text: 'Heading'},\n  {type: 'heading', selector: 'h3', text: 'Heading'},\n  {type: 'heading', selector: 'h4', text: 'Heading'},\n  {type: 'heading', selector: 'h5', text: 'Heading'},\n  {type: 'heading', selector: 'h6', text: 'Heading'},\n  {type: 'preformatted', selector: 'pre', text: 'Preformatted'},\n];\n\nexport const TEXT_COLOR_ITEMS = [\n  {name: 'red', color: '#f44336'},\n  {name: 'pink', color: '#e91e63'},\n  {name: 'purple', color: '#9c27b0'},\n  {name: 'deep-purple', color: '#673ab7'},\n  {name: 'indigo', color: '#3f51b5'},\n  {name: 'blue', color: '#2196f3'},\n  {name: 'light-blue', color: '#03a9f4'},\n  {name: 'cyan', color: '#00bcd4'},\n  {name: 'teal', color: '#009688'},\n  {name: 'green', color: '#4caf50'},\n  {name: 'light-green', color: '#8bc34a'},\n  {name: 'lime', color: '#cddc39'},\n  {name: 'yellow', color: '#ffeb3b'},\n  {name: 'amber', color: '#ffc107'},\n  {name: 'orange', color: '#ff9800'},\n  {name: 'deep-orange', color: '#ff5722'},\n  {name: 'brown', color: '#795548'},\n  {name: 'grey', color: '#9e9e9e'},\n  {name: 'blue-grey', color: '#607d8b'},\n  {name: 'mdb-color', color: '#45526e'},\n  {name: 'white', color: '#fff'},\n  {name: 'black', color: '#000'},\n];\n\nexport const TEXT_DECORATION_ITEMS = [\n  {type: 'bold', icon: 'fas fa-bold', tooltip: 'Bold'},\n  {type: 'italic', icon: 'fas fa-italic', tooltip: 'Italic'},\n  {type: 'strikethrough', icon: 'fas fa-strikethrough', tooltip: 'Strikethrough'},\n  {type: 'underline', icon: 'fas fa-underline', tooltip: 'Underline'},\n  {type: 'color', icon: 'fas fa-font', tooltip: 'Color'}\n];\n\nexport const ALIGN_ITEMS = [\n  {type: 'justifyLeft', icon: 'fas fa-align-left', tooltip: 'Align Left'},\n  {type: 'justifyCenter', icon: 'fas fa-align-center', tooltip: 'Align Center'},\n  {type: 'justifyRight', icon: 'fas fa-align-right', tooltip: 'Align Right'},\n  {type: 'justifyFull', icon: 'fas fa-align-justify', tooltip: 'Align Justify'},\n];\n\nexport const IMAGE_HREF_ITEMS = [\n  {type: 'createLink', icon: 'fas fa-paperclip', tooltip: 'Insert Link', linkURLPlaceholder: 'Enter Link URL'},\n  {type: 'insertImage', icon: 'fas fa-image', tooltip: 'Insert Image', imageURLPlaceholder: 'Enter image URL'},\n];\n\nexport const LIST_ITEMS = [\n  {type: 'insertOrderedList', icon: 'fas fa-list-ol', tooltip: 'Numbered List'},\n  {type: 'insertUnorderedList', icon: 'fas fa-list-ul', tooltip: 'Ordered List'},\n];\n","import {\n  AfterViewInit,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  EventEmitter,\n  forwardRef,\n  Input,\n  Output,\n  Renderer2,\n  ViewChild,\n  OnDestroy,\n  ViewEncapsulation\n} from '@angular/core';\nimport {\n  ALIGN_ITEMS,\n  IMAGE_HREF_ITEMS,\n  LIST_ITEMS,\n  TEXT_COLOR_ITEMS,\n  TEXT_DECORATION_ITEMS,\n  TEXT_STYLE_ITEMS\n} from './mdb-defaults';\nimport { fromEvent, Observable, Subject, Subscription } from 'rxjs';\nimport {\n  debounceTime,\n  distinctUntilChanged,\n  map,\n  takeUntil\n} from 'rxjs/operators';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\n\nconst VALUE_ACCESSOR = {\n  provide: NG_VALUE_ACCESSOR,\n  // tslint:disable-next-line: no-use-before-declare\n  useExisting: forwardRef(() => MdbWysiwygComponent),\n  multi: true\n};\n\n@Component({\n  // tslint:disable-next-line: component-selector\n  selector: 'mdb-wysiwyg',\n  templateUrl: './mdb-wysiwyg.component.html',\n  styleUrls: ['./mdb-wysiwyg.component.scss'],\n  providers: [VALUE_ACCESSOR],\n  encapsulation: ViewEncapsulation.None\n})\nexport class MdbWysiwygComponent implements AfterViewInit, OnDestroy {\n  @Input()\n  get value() {\n    return this._value;\n  }\n  set value(newValue: string) {\n    if (newValue || newValue === '') {\n      this._value = newValue;\n      this.textarea.nativeElement.innerHTML = newValue;\n    } else {\n      this._value = '';\n      this.textarea.nativeElement.innerHTML = '';\n    }\n\n    this.valueChange.emit(newValue);\n    this.wysiwygValueChange$.next(newValue);\n  }\n  private _value = '';\n  @Input() options: {\n    tooltips: boolean;\n    translations: Array<any>;\n    colors: Array<any>;\n  } = null;\n\n  @Output() valueChange: EventEmitter<string> = new EventEmitter<string>();\n\n  @Output() valueContent: EventEmitter<string> = new EventEmitter<string>();\n\n  @ViewChild('textarea', { static: true }) textarea: ElementRef;\n\n  isTextStyleDropdownVisible = false;\n  isTextColorDropdownVisible = false;\n\n  selectedTextStyle = 'Paragraph';\n  selectedTextColor = '#000';\n\n  showTooltips = true;\n  optionsLength = 0;\n\n  textStyleItems = TEXT_STYLE_ITEMS;\n  textColorItems = TEXT_COLOR_ITEMS;\n  textDecorationItems = TEXT_DECORATION_ITEMS;\n  alignItems = ALIGN_ITEMS;\n  imageHrefItems = IMAGE_HREF_ITEMS;\n  listItems = LIST_ITEMS;\n\n  private _destroy = new Subject<void>();\n\n  private _htmlIsVisible = false;\n\n  private wysiwygValueChange$: Subject<any> = new Subject<any>();\n\n  public valueChange$(): Observable<any> {\n    return this.wysiwygValueChange$;\n  }\n\n  onChange = (_: any) => {};\n  onTouched = () => {};\n\n  writeValue(value: any) {\n    if (value || value === '') {\n      this.value = value;\n      this.textarea.nativeElement.innerHTML = this.value;\n      this.wysiwygValueChange$.next(value);\n      this.valueChange.emit(value);\n      this.onChange(value);\n      this.onTouched();\n    }\n  }\n\n  valueChanged() {\n    this.onChange(this.value);\n  }\n\n  registerOnChange(fn: (_: any) => void) {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn: () => void) {\n    this.onTouched = fn;\n  }\n\n  setDisableState(isDisabled: boolean): void {}\n\n  constructor(\n    private renderer: Renderer2,\n    private cdRef: ChangeDetectorRef,\n    private el: ElementRef\n  ) {}\n\n  public selectTextStyle(item: any, event: any) {\n    event.preventDefault();\n    if (!this.options || !this.options.translations) {\n      this.selectedTextStyle =\n        item.text === 'Heading'\n          ? item.text + item.selector.toString().replace('h', ' ')\n          : item.text;\n    } else {\n      this.selectedTextStyle =\n        item.text === this.options.translations['textElements'].heading\n          ? item.text + item.selector.toString().replace('h', ' ')\n          : item.text;\n    }\n    this.isTextStyleDropdownVisible = false;\n\n    if (\n      this.textStyleItems.findIndex(\n        el => el.text === window.getSelection().anchorNode.textContent\n      ) === -1\n    ) {\n      document.execCommand('formatBlock', false, `<${item.selector}>`);\n    }\n  }\n\n  public selectTextColor(item: any, event: any) {\n    event.preventDefault();\n    this.selectedTextColor = item.color;\n    this.isTextColorDropdownVisible = false;\n\n    document.execCommand('styleWithCSS', false, item.color);\n    document.execCommand('foreColor', false, item.color);\n  }\n\n  public performAction(action: string, event: any) {\n    event.preventDefault();\n    const selection =\n      window.getSelection().anchorNode &&\n      window.getSelection().anchorNode.parentElement.firstChild;\n\n    if (selection) {\n      if (\n        this.textStyleItems.findIndex(\n          el => el.text === window.getSelection().anchorNode.textContent\n        ) === -1\n      ) {\n        if (action === 'color') {\n          this.isTextColorDropdownVisible = !this.isTextColorDropdownVisible;\n        }\n        document.execCommand(action);\n      }\n\n      const actions = [\n        'justifyLeft',\n        'justifyCenter',\n        'justifyRight',\n        'justifyFull',\n        'createLink',\n        'insertImage'\n      ];\n\n      if (actions.find(el => el === action)) {\n        let value = null;\n        if (action === 'createLink' || action === 'insertImage') {\n          const link = window.getSelection().getRangeAt(0).toString() || 'https://';\n          \n          if (!this.options || !this.options.translations) {\n            value = prompt('Insert URL: ', link);\n          } else {\n            value = prompt(\n              `${action === 'createLink'\n                ? this.options.translations['imageAndLink'].linkURLPlaceholder\n                : this.options.translations['imageAndLink'].imageURLPlaceholder\n              }`,\n              link\n            );\n          }\n\n          document.execCommand('delete', false)\n        }\n        document.execCommand(action, false, value);\n      }\n    }\n  }\n\n  public toggleHTMLCode() {\n    if (!this._htmlIsVisible) {\n      this.textarea.nativeElement.textContent = this.textarea.nativeElement.innerHTML;\n      this._htmlIsVisible = true;\n    } else {\n      this.textarea.nativeElement.innerHTML = this.textarea.nativeElement.innerText;\n      this._htmlIsVisible = false;\n    }\n  }\n\n  changeTooltipTranslation(array: Array<any>, el: string, value: any) {\n    array.forEach((element: any) => {\n      element[el] = value[element.type];\n    });\n  }\n\n  ngAfterViewInit(): void {\n    if (this.value || this.value === '') {\n      this.textarea.nativeElement.innerHTML = this.value;\n    } else {\n      this.textarea.nativeElement.innerHTML = '';\n    }\n\n    this.renderer.listen(this.textarea.nativeElement, 'click', () => {\n      this.isTextStyleDropdownVisible = false;\n      this.isTextColorDropdownVisible = false;\n    });\n\n    fromEvent(this.el.nativeElement, 'input')\n      .pipe(\n        debounceTime(100),\n        distinctUntilChanged(),\n        takeUntil(this._destroy)\n      )\n      .subscribe((event: any) => {\n        this.wysiwygValueChange$.next(event.target.innerHTML);\n        this.valueChange.emit(event.target.innerHTML);\n        this.onChange(event.target.innerHTML);\n        this.valueContent.emit(event.target.textContent);\n        this.onTouched();\n      });\n\n    if (this.options) {\n      this.optionsLength = Object.entries(this.options).length;\n      if (this.options.translations) {\n        Object.entries(this.options.translations).forEach(([key, value]) => {\n          switch (key) {\n            case 'textElements': {\n              this.selectedTextStyle = value.paragraph;\n              this.changeTooltipTranslation(TEXT_STYLE_ITEMS, 'text', value);\n              break;\n            }\n            case 'textStyle': {\n              this.changeTooltipTranslation(\n                TEXT_DECORATION_ITEMS,\n                'tooltip',\n                value\n              );\n              break;\n            }\n            case 'textAlign': {\n              this.changeTooltipTranslation(ALIGN_ITEMS, 'tooltip', value);\n              break;\n            }\n            case 'imageAndLink': {\n              this.changeTooltipTranslation(IMAGE_HREF_ITEMS, 'tooltip', value);\n              break;\n            }\n            case 'lists': {\n              this.changeTooltipTranslation(LIST_ITEMS, 'tooltip', value);\n              break;\n            }\n            default: {\n              this.options.translations['showHTML'] = value;\n\n              break;\n            }\n          }\n          if (!this.options.translations['showHTML']) {\n            this.options.translations['showHTML'] = 'Show HTML Code';\n          }\n        });\n      }\n      if (this.options.colors) {\n        this.textColorItems = [];\n        Object.entries(this.options.colors).forEach((color: any) => {\n          this.textColorItems.push({ name: color[0], color: color[1] });\n        });\n      }\n    }\n    if (!this.options || Object.entries(this.options).length === 0) {\n      this.showTooltips = true;\n    } else if (this.options && !this.options.tooltips) {\n      this.showTooltips = false;\n    }\n    this.cdRef.detectChanges();\n  }\n  ngOnDestroy() {\n    this._destroy.next();\n    this._destroy.complete();\n  }\n}\n","import {NgModule} from '@angular/core';\nimport {MdbWysiwygComponent} from './mdb-wysiwyg.component';\nimport {CommonModule} from \"@angular/common\";\nimport {TooltipModule} from \"angular-bootstrap-md\";\n\n\n@NgModule({\n  declarations: [MdbWysiwygComponent],\n  imports: [\n    CommonModule,\n    TooltipModule.forRoot()\n  ],\n  exports: [MdbWysiwygComponent, CommonModule]\n})\nexport class MdbWysiwygModule {\n}\n","/*\n * Public API Surface of mdb-wysiwyg\n */\n\nexport * from './lib/mdb-wysiwyg.component';\nexport * from './lib/mdb-wysiwyg.module';\nexport * from './lib/mdb-defaults';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":[],"mappings":"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"}