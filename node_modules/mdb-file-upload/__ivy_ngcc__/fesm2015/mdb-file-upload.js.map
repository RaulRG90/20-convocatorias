{"version":3,"file":"mdb-file-upload.js","sources":["../../../projects/mdb-file-upload/src/lib/file-upload/file-upload.component.ts","../../../projects/mdb-file-upload/src/lib/mdb-file-upload.module.ts","../../../projects/mdb-file-upload/src/public_api.ts","../../../projects/mdb-file-upload/src/mdb-file-upload.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  Component,\n  ViewChild,\n  ElementRef,\n  Input,\n  Output,\n  EventEmitter,\n  OnChanges,\n  SimpleChanges,\n} from '@angular/core';\nimport { faCloudUploadAlt, faFile, faTrashAlt } from '@fortawesome/free-solid-svg-icons';\nimport { FaIconLibrary } from '@fortawesome/angular-fontawesome';\n\nexport interface ITextTranslation {\n  fileText?: string;\n  removeText?: string;\n  imageFileText?: string;\n}\n\n@Component({\n  selector: 'mdb-file-upload',\n  templateUrl: './file-upload.component.html',\n  styleUrls: ['./file-upload.component.scss'],\n})\nexport class MdbFileUploadComponent implements OnChanges {\n  @ViewChild('fileInput', { static: true }) fileInput: ElementRef;\n\n  @Input() disabled = false;\n  @Input() height = 200;\n  @Input()\n  get defaultFile() {\n    return this._defaultFile;\n  }\n  set defaultFile(value: string) {\n    if (value) {\n      this._defaultFile = value;\n      this._setDefaultPreview(value);\n    }\n  }\n  private _defaultFile: string;\n  @Input() customText: ITextTranslation;\n\n  textTranslation: ITextTranslation = {\n    fileText: 'Drag and drop a file here or click',\n    removeText: 'Remove',\n    imageFileText: 'Drag and drop or click to replace',\n  };\n\n  @Output() fileAdded = new EventEmitter<File>();\n  @Output() fileRemoved = new EventEmitter<any>();\n\n  imageFileExtensions: string[] = ['png', 'jpg', 'jpeg', 'bmp', 'gif'];\n  url: string | ArrayBuffer;\n  fileType: string;\n  fileName: string;\n  dragging: boolean;\n  isFileAdded = false;\n  isImageFile = false;\n  defaultPreview = false;\n\n  constructor(library: FaIconLibrary) {\n    library.addIcons(faCloudUploadAlt, faFile, faTrashAlt);\n  }\n\n  private _setDefaultPreview(url: string) {\n    this.url = url;\n    this.fileName = this._cleanFileName(url);\n    this.defaultPreview = true;\n\n    if (this.isImage(this.fileName)) {\n      this.isImageFile = true;\n    } else {\n      this.isImageFile = false;\n    }\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes['customText']) {\n      const currentValue = changes['customText'].currentValue;\n\n      Object.keys(currentValue).forEach((k) => {\n        this.textTranslation[k] = currentValue[k];\n      });\n    }\n  }\n\n  onFilesAdded() {\n    if (!this.dragging && !this.disabled) {\n      const file: File = this.fileInput.nativeElement.files[0];\n      if (file) {\n        this.fileType = this.getFileType(file.name);\n        this.fileName = file.name;\n        this.isFileAdded = true;\n\n        this.showPreview(file);\n\n        this.fileAdded.emit(file);\n      }\n    }\n  }\n\n  onFileDrop(event: any) {\n    if (event.dataTransfer && this.dragging && !this.disabled) {\n      event.dataTransfer.dropEffect = 'copy';\n      const file: File = event.dataTransfer.files[0];\n      this.fileType = this.getFileType(file.name);\n      this.fileName = file.name;\n      this.showPreview(file);\n    }\n    this.dragging = false;\n  }\n\n  onDragOver(event: any) {\n    if (!this.disabled) {\n      this.dragging = true;\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  }\n\n  onDragLeave(event: any) {\n    if (!this.disabled) {\n      this.dragging = false;\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  }\n\n  reset() {\n    if (this.isFileAdded) {\n      this.removePreview();\n      this.fileInput.nativeElement.value = '';\n      this.fileRemoved.emit();\n    }\n\n    if (this.defaultPreview) {\n      this.fileInput.nativeElement.value = '';\n      this.defaultPreview = false;\n    }\n  }\n\n  showPreview(file: any) {\n    if (this.isImage(file.name)) {\n      const reader = new FileReader();\n      reader.readAsDataURL(file);\n      reader.onload = () => {\n        this.url = reader.result;\n      };\n      this.isImageFile = true;\n    } else {\n      this.isImageFile = false;\n    }\n\n    if (this.defaultPreview) {\n      this.defaultPreview = false;\n    }\n  }\n\n  removePreview() {\n    this.isFileAdded = false;\n  }\n\n  getFileType(fileName: string): string {\n    return fileName.split('.').pop().toLowerCase();\n  }\n\n  isImage(fileName: string) {\n    return this.imageFileExtensions.indexOf(this.getFileType(fileName)) !== -1;\n  }\n\n  private _cleanFileName(url: string): string {\n    return url.split('/').pop();\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { MdbFileUploadComponent } from './file-upload/file-upload.component';\nimport { FontAwesomeModule } from '@fortawesome/angular-fontawesome';\nimport { CommonModule } from '@angular/common';\n\n@NgModule({\n  declarations: [MdbFileUploadComponent],\n  imports: [\n    CommonModule,\n    FontAwesomeModule\n  ],\n  exports: [MdbFileUploadComponent]\n})\nexport class MdbFileUploadModule {}\n","/*\n * Public API Surface of mdb-file-upload\n */\n\nexport * from './lib/mdb-file-upload.module';\nexport * from './lib/file-upload/file-upload.component';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"]}