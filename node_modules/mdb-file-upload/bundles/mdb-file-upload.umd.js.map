{"version":3,"file":"mdb-file-upload.umd.js","sources":["../../../projects/mdb-file-upload/src/lib/file-upload/file-upload.component.ts","../../../projects/mdb-file-upload/src/lib/mdb-file-upload.module.ts","../../../projects/mdb-file-upload/src/public_api.ts","../../../projects/mdb-file-upload/src/mdb-file-upload.ts"],"sourcesContent":["import {\n  Component,\n  ViewChild,\n  ElementRef,\n  Input,\n  Output,\n  EventEmitter,\n  OnChanges,\n  SimpleChanges,\n} from '@angular/core';\nimport { faCloudUploadAlt, faFile, faTrashAlt } from '@fortawesome/free-solid-svg-icons';\nimport { FaIconLibrary } from '@fortawesome/angular-fontawesome';\n\nexport interface ITextTranslation {\n  fileText?: string;\n  removeText?: string;\n  imageFileText?: string;\n}\n\n@Component({\n  selector: 'mdb-file-upload',\n  templateUrl: './file-upload.component.html',\n  styleUrls: ['./file-upload.component.scss'],\n})\nexport class MdbFileUploadComponent implements OnChanges {\n  @ViewChild('fileInput', { static: true }) fileInput: ElementRef;\n\n  @Input() disabled = false;\n  @Input() height = 200;\n  @Input()\n  get defaultFile() {\n    return this._defaultFile;\n  }\n  set defaultFile(value: string) {\n    if (value) {\n      this._defaultFile = value;\n      this._setDefaultPreview(value);\n    }\n  }\n  private _defaultFile: string;\n  @Input() customText: ITextTranslation;\n\n  textTranslation: ITextTranslation = {\n    fileText: 'Drag and drop a file here or click',\n    removeText: 'Remove',\n    imageFileText: 'Drag and drop or click to replace',\n  };\n\n  @Output() fileAdded = new EventEmitter<File>();\n  @Output() fileRemoved = new EventEmitter<any>();\n\n  imageFileExtensions: string[] = ['png', 'jpg', 'jpeg', 'bmp', 'gif'];\n  url: string | ArrayBuffer;\n  fileType: string;\n  fileName: string;\n  dragging: boolean;\n  isFileAdded = false;\n  isImageFile = false;\n  defaultPreview = false;\n\n  constructor(library: FaIconLibrary) {\n    library.addIcons(faCloudUploadAlt, faFile, faTrashAlt);\n  }\n\n  private _setDefaultPreview(url: string) {\n    this.url = url;\n    this.fileName = this._cleanFileName(url);\n    this.defaultPreview = true;\n\n    if (this.isImage(this.fileName)) {\n      this.isImageFile = true;\n    } else {\n      this.isImageFile = false;\n    }\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes['customText']) {\n      const currentValue = changes['customText'].currentValue;\n\n      Object.keys(currentValue).forEach((k) => {\n        this.textTranslation[k] = currentValue[k];\n      });\n    }\n  }\n\n  onFilesAdded() {\n    if (!this.dragging && !this.disabled) {\n      const file: File = this.fileInput.nativeElement.files[0];\n      if (file) {\n        this.fileType = this.getFileType(file.name);\n        this.fileName = file.name;\n        this.isFileAdded = true;\n\n        this.showPreview(file);\n\n        this.fileAdded.emit(file);\n      }\n    }\n  }\n\n  onFileDrop(event: any) {\n    if (event.dataTransfer && this.dragging && !this.disabled) {\n      event.dataTransfer.dropEffect = 'copy';\n      const file: File = event.dataTransfer.files[0];\n      this.fileType = this.getFileType(file.name);\n      this.fileName = file.name;\n      this.showPreview(file);\n    }\n    this.dragging = false;\n  }\n\n  onDragOver(event: any) {\n    if (!this.disabled) {\n      this.dragging = true;\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  }\n\n  onDragLeave(event: any) {\n    if (!this.disabled) {\n      this.dragging = false;\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  }\n\n  reset() {\n    if (this.isFileAdded) {\n      this.removePreview();\n      this.fileInput.nativeElement.value = '';\n      this.fileRemoved.emit();\n    }\n\n    if (this.defaultPreview) {\n      this.fileInput.nativeElement.value = '';\n      this.defaultPreview = false;\n    }\n  }\n\n  showPreview(file: any) {\n    if (this.isImage(file.name)) {\n      const reader = new FileReader();\n      reader.readAsDataURL(file);\n      reader.onload = () => {\n        this.url = reader.result;\n      };\n      this.isImageFile = true;\n    } else {\n      this.isImageFile = false;\n    }\n\n    if (this.defaultPreview) {\n      this.defaultPreview = false;\n    }\n  }\n\n  removePreview() {\n    this.isFileAdded = false;\n  }\n\n  getFileType(fileName: string): string {\n    return fileName.split('.').pop().toLowerCase();\n  }\n\n  isImage(fileName: string) {\n    return this.imageFileExtensions.indexOf(this.getFileType(fileName)) !== -1;\n  }\n\n  private _cleanFileName(url: string): string {\n    return url.split('/').pop();\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { MdbFileUploadComponent } from './file-upload/file-upload.component';\nimport { FontAwesomeModule } from '@fortawesome/angular-fontawesome';\nimport { CommonModule } from '@angular/common';\n\n@NgModule({\n  declarations: [MdbFileUploadComponent],\n  imports: [\n    CommonModule,\n    FontAwesomeModule\n  ],\n  exports: [MdbFileUploadComponent]\n})\nexport class MdbFileUploadModule {}\n","/*\n * Public API Surface of mdb-file-upload\n */\n\nexport * from './lib/mdb-file-upload.module';\nexport * from './lib/file-upload/file-upload.component';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":["EventEmitter","faCloudUploadAlt","faFile","faTrashAlt","Component","FaIconLibrary","ViewChild","Input","Output","NgModule","CommonModule","FontAwesomeModule"],"mappings":"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"}