import { Injectable } from '@angular/core';
import { Subject } from 'rxjs';
import * as i0 from "@angular/core";
export class MdbColorPickerService {
    constructor() {
        this._segmentedColorChange = new Subject();
        this._alpha = '0.5';
        this._alphaChange = new Subject();
        this._coordsChange = new Subject();
        this._rgbaSegments = ['255', '255', '255', '0.5'];
        this._color = { rgbaColor: '', hexColor: '' };
        this._colorChange = new Subject();
        this._colorPalette = [];
        this._colorPaletteChange = new Subject();
    }
    setColorPalette(colorArray) {
        this._colorPalette = colorArray;
        this._colorPaletteChange.next(this.getColorPalette());
    }
    addColorToPalette(color) {
        this._colorPalette.push(color);
        this._colorPaletteChange.next(this.getColorPalette());
    }
    getColorPalette() {
        return this._colorPalette;
    }
    removeColorFromPalette(index) {
        this._colorPalette.splice(index, 1);
    }
    colorPaletteWasChanged() {
        return this._colorPaletteChange;
    }
    setColor(rgbaColor, hexColor) {
        this._color.rgbaColor = rgbaColor;
        this._color.hexColor = hexColor;
        this._colorChange.next(this.getColor());
    }
    getColor() {
        return this._color;
    }
    colorWasChanged() {
        return this._colorChange;
    }
    setSegmentedColor(value) {
        this._segmentedColor = value;
        this._segmentedColorChange.next(this.getSegmentedColor());
        const rgbaColor = this.convertToRGBA();
        const hexColor = this.rgbaToHex(this.getRgbaColor());
        this.setColor(rgbaColor, hexColor);
    }
    getSegmentedColor() {
        return this._segmentedColor;
    }
    colorSegmentedWasChanged() {
        return this._segmentedColorChange;
    }
    setAlpha(value) {
        this._alpha = value;
        this._alphaChange.next(this.getAlpha());
        const rgbaColor = this.convertToRGBA();
        const hexColor = this.rgbaToHex(this.getRgbaColor());
        this.setColor(rgbaColor, hexColor);
    }
    getAlpha() {
        return this._alpha;
    }
    alphaWasChanged() {
        return this._alphaChange;
    }
    setCoords(value) {
        this._coords = value;
        this._coordsChange.next(this.getCoords());
    }
    getCoords() {
        return this._coords;
    }
    coordsWasChanged() {
        return this._coordsChange;
    }
    convertToRGBA() {
        this._rgbaColor = this.getSegmentedColor().split(',');
        const alphaChannel = this.getAlpha();
        this._rgbaSegments[0] = this._rgbaColor[0];
        this._rgbaSegments[1] = this._rgbaColor[1];
        this._rgbaSegments[2] = this._rgbaColor[2];
        this._rgbaSegments[3] = alphaChannel;
        return 'rgba(' + this._rgbaSegments.toString() + ')';
    }
    getRgbaColor() {
        return this.convertToRGBA();
    }
    getHexColor() {
        return this.rgbaToHex(this.getSegmentedColor() + ',' + this.getAlpha());
    }
    rgbaToHex(value) {
        value = value.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);
        return (value && value.length === 4) ? '#' +
            ('0' + parseInt(value[1], 10).toString(16)).slice(-2) +
            ('0' + parseInt(value[2], 10).toString(16)).slice(-2) +
            ('0' + parseInt(value[3], 10).toString(16)).slice(-2) : '';
    }
    hexToRgba(value, alpha) {
        const r = parseInt(value.slice(1, 3), 16);
        const g = parseInt(value.slice(3, 5), 16);
        const b = parseInt(value.slice(5, 7), 16);
        if (alpha) {
            return `rgba(${r}, ${g}, ${b}, ${alpha})`;
        }
        else {
            return `rgb(${r}, ${g}, ${b})`;
        }
    }
}
MdbColorPickerService.ɵprov = i0.ɵɵdefineInjectable({ factory: function MdbColorPickerService_Factory() { return new MdbColorPickerService(); }, token: MdbColorPickerService, providedIn: "root" });
MdbColorPickerService.decorators = [
    { type: Injectable, args: [{
                providedIn: 'root'
            },] }
];
MdbColorPickerService.ctorParameters = () => [];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWRiLWNvbG9yLXBpY2tlci5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvbWRiLWNvbG9yLXBpY2tlci9zcmMvbGliL3NlcnZpY2VzL21kYi1jb2xvci1waWNrZXIuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzNDLE9BQU8sRUFBRSxPQUFPLEVBQWMsTUFBTSxNQUFNLENBQUM7O0FBSTNDLE1BQU0sT0FBTyxxQkFBcUI7SUE2SWhDO1FBM0lRLDBCQUFxQixHQUFvQixJQUFJLE9BQU8sRUFBVSxDQUFDO1FBRS9ELFdBQU0sR0FBRyxLQUFLLENBQUM7UUFDZixpQkFBWSxHQUFvQixJQUFJLE9BQU8sRUFBVSxDQUFDO1FBR3RELGtCQUFhLEdBQW9CLElBQUksT0FBTyxFQUFVLENBQUM7UUFJdkQsa0JBQWEsR0FBa0IsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLENBQUMsQ0FBQztRQUU1RCxXQUFNLEdBQTRDLEVBQUUsU0FBUyxFQUFFLEVBQUUsRUFBRSxRQUFRLEVBQUUsRUFBRSxFQUFFLENBQUM7UUFDbEYsaUJBQVksR0FBcUQsSUFBSSxPQUFPLEVBQTJDLENBQUM7UUFFeEgsa0JBQWEsR0FBVSxFQUFFLENBQUM7UUFDMUIsd0JBQW1CLEdBQXdCLElBQUksT0FBTyxFQUFjLENBQUM7SUEySDdELENBQUM7SUF6SFYsZUFBZSxDQUFDLFVBQXNCO1FBQzNDLElBQUksQ0FBQyxhQUFhLEdBQUcsVUFBVSxDQUFDO1FBQ2hDLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDLENBQUM7SUFDeEQsQ0FBQztJQUVNLGlCQUFpQixDQUFDLEtBQVU7UUFDakMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENB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LENBQUMsQ0FBQztZQUNyRCxDQUFDLEdBQUcsR0FBRyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7SUFDL0QsQ0FBQztJQUVNLFNBQVMsQ0FBQyxLQUFhLEVBQUUsS0FBYztRQUM1QyxNQUFNLENBQUMsR0FBRyxRQUFRLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFDMUMsTUFBTSxDQUFDLEdBQUcsUUFBUSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQzFDLE1BQU0sQ0FBQyxHQUFHLFFBQVEsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUUxQyxJQUFJLEtBQUssRUFBRTtZQUNULE9BQU8sUUFBUSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsS0FBSyxLQUFLLEdBQUcsQ0FBQztTQUMzQzthQUFNO1lBQ0wsT0FBTyxPQUFPLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUM7U0FDaEM7SUFDSCxDQUFDOzs7O1lBOUlGLFVBQVUsU0FBQztnQkFDVixVQUFVLEVBQUUsTUFBTTthQUNuQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvb3JkcyB9IGZyb20gJy4vLi4vaW50ZXJmYWNlcy9jb29yZHMuaW50ZXJmYWNlJztcbmltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFN1YmplY3QsIE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcbkBJbmplY3RhYmxlKHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXG59KVxuZXhwb3J0IGNsYXNzIE1kYkNvbG9yUGlja2VyU2VydmljZSB7XG4gIHByaXZhdGUgX3NlZ21lbnRlZENvbG9yOiBzdHJpbmc7XG4gIHByaXZhdGUgX3NlZ21lbnRlZENvbG9yQ2hhbmdlOiBTdWJqZWN0PHN0cmluZz4gPSBuZXcgU3ViamVjdDxzdHJpbmc+KCk7XG5cbiAgcHJpdmF0ZSBfYWxwaGEgPSAnMC41JztcbiAgcHJpdmF0ZSBfYWxwaGFDaGFuZ2U6IFN1YmplY3Q8c3RyaW5nPiA9IG5ldyBTdWJqZWN0PHN0cmluZz4oKTtcblxuICBwcml2YXRlIF9jb29yZHM6IENvb3JkcztcbiAgcHJpdmF0ZSBfY29vcmRzQ2hhbmdlOiBTdWJqZWN0PENvb3Jkcz4gPSBuZXcgU3ViamVjdDxDb29yZHM+KCk7XG5cbiAgcHJpdmF0ZSBfcmdiYUNvbG9yOiBBcnJheTxzdHJpbmc+IHwgc3RyaW5nO1xuXG4gIHByaXZhdGUgX3JnYmFTZWdtZW50czogQXJyYXk8c3RyaW5nPiA9IFsnMjU1JywgJzI1NScsICcyNTUnLCAnMC41J107XG5cbiAgcHJpdmF0ZSBfY29sb3I6IHsgcmdiYUNvbG9yOiBzdHJpbmcsIGhleENvbG9yOiBzdHJpbmcgfSA9IHsgcmdiYUNvbG9yOiAnJywgaGV4Q29sb3I6ICcnIH07XG4gIHByaXZhdGUgX2NvbG9yQ2hhbmdlOiBTdWJqZWN0PHsgcmdiYUNvbG9yOiBzdHJpbmcsIGhleENvbG9yOiBzdHJpbmcgfT4gPSBuZXcgU3ViamVjdDx7IHJnYmFDb2xvcjogc3RyaW5nLCBoZXhDb2xvcjogc3RyaW5nIH0+KCk7XG5cbiAgcHJpdmF0ZSBfY29sb3JQYWxldHRlOiBhbnlbXSA9IFtdO1xuICBwcml2YXRlIF9jb2xvclBhbGV0dGVDaGFuZ2U6IFN1YmplY3Q8QXJyYXk8YW55Pj4gPSBuZXcgU3ViamVjdDxBcnJheTxhbnk+PigpO1xuXG4gIHB1YmxpYyBzZXRDb2xvclBhbGV0dGUoY29sb3JBcnJheTogQXJyYXk8YW55Pikge1xuICAgIHRoaXMuX2NvbG9yUGFsZXR0ZSA9IGNvbG9yQXJyYXk7XG4gICAgdGhpcy5fY29sb3JQYWxldHRlQ2hhbmdlLm5leHQodGhpcy5nZXRDb2xvclBhbGV0dGUoKSk7XG4gIH1cblxuICBwdWJsaWMgYWRkQ29sb3JUb1BhbGV0dGUoY29sb3I6IGFueSkge1xuICAgIHRoaXMuX2NvbG9yUGFsZXR0ZS5wdXNoKGNvbG9yKTtcbiAgICB0aGlzLl9jb2xvclBhbGV0dGVDaGFuZ2UubmV4dCh0aGlzLmdldENvbG9yUGFsZXR0ZSgpKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRDb2xvclBhbGV0dGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvbG9yUGFsZXR0ZTtcbiAgfVxuXG4gIHB1YmxpYyByZW1vdmVDb2xvckZyb21QYWxldHRlKGluZGV4OiBudW1iZXIpIHtcbiAgICB0aGlzLl9jb2xvclBhbGV0dGUuc3BsaWNlKGluZGV4LCAxKTtcbiAgfVxuXG4gIHB1YmxpYyBjb2xvclBhbGV0dGVXYXNDaGFuZ2VkKCk6IE9ic2VydmFibGU8QXJyYXk8YW55Pj4ge1xuICAgIHJldHVybiB0aGlzLl9jb2xvclBhbGV0dGVDaGFuZ2U7XG4gIH1cblxuICBwcml2YXRlIHNldENvbG9yKHJnYmFDb2xvcj86IGFueSwgaGV4Q29sb3I/OiBhbnkpIHtcbiAgICB0aGlzLl9jb2xvci5yZ2JhQ29sb3IgPSByZ2JhQ29sb3I7XG4gICAgdGhpcy5fY29sb3IuaGV4Q29sb3IgPSBoZXhDb2xvcjtcbiAgICB0aGlzLl9jb2xvckNoYW5nZS5uZXh0KHRoaXMuZ2V0Q29sb3IoKSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0Q29sb3IoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvbG9yO1xuICB9XG5cbiAgcHVibGljIGNvbG9yV2FzQ2hhbmdlZCgpOiBPYnNlcnZhYmxlPHsgcmdiYUNvbG9yOiBzdHJpbmcsIGhleENvbG9yOiBzdHJpbmcgfT4ge1xuICAgIHJldHVybiB0aGlzLl9jb2xvckNoYW5nZTtcbiAgfVxuXG4gIHNldFNlZ21lbnRlZENvbG9yKHZhbHVlOiBzdHJpbmcpIHtcbiAgICB0aGlzLl9zZWdtZW50ZWRDb2xvciA9IHZhbHVlO1xuICAgIHRoaXMuX3NlZ21lbnRlZENvbG9yQ2hhbmdlLm5leHQodGhpcy5nZXRTZWdtZW50ZWRDb2xvcigpKTtcblxuICAgIGNvbnN0IHJnYmFDb2xvciA9IHRoaXMuY29udmVydFRvUkdCQSgpO1xuICAgIGNvbnN0IGhleENvbG9yID0gdGhpcy5yZ2JhVG9IZXgodGhpcy5nZXRSZ2JhQ29sb3IoKSk7XG4gICAgdGhpcy5zZXRDb2xvcihyZ2JhQ29sb3IsIGhleENvbG9yKTtcbiAgfVxuXG4gIGdldFNlZ21lbnRlZENvbG9yKCkge1xuICAgIHJldHVybiB0aGlzLl9zZWdtZW50ZWRDb2xvcjtcbiAgfVxuXG4gIGNvbG9yU2VnbWVudGVkV2FzQ2hhbmdlZCgpOiBPYnNlcnZhYmxlPHN0cmluZz4ge1xuICAgIHJldHVybiB0aGlzLl9zZWdtZW50ZWRDb2xvckNoYW5nZTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRBbHBoYSh2YWx1ZTogc3RyaW5nKSB7XG4gICAgdGhpcy5fYWxwaGEgPSB2YWx1ZTtcbiAgICB0aGlzLl9hbHBoYUNoYW5nZS5uZXh0KHRoaXMuZ2V0QWxwaGEoKSk7XG5cbiAgICBjb25zdCByZ2JhQ29sb3IgPSB0aGlzLmNvbnZlcnRUb1JHQkEoKTtcbiAgICBjb25zdCBoZXhDb2xvciA9IHRoaXMucmdiYVRvSGV4KHRoaXMuZ2V0UmdiYUNvbG9yKCkpO1xuICAgIHRoaXMuc2V0Q29sb3IocmdiYUNvbG9yLCBoZXhDb2xvcik7XG4gIH1cblxuICBwdWJsaWMgZ2V0QWxwaGEoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2FscGhhO1xuICB9XG5cbiAgcHVibGljIGFscGhhV2FzQ2hhbmdlZCgpOiBPYnNlcnZhYmxlPHN0cmluZz4ge1xuICAgIHJldHVybiB0aGlzLl9hbHBoYUNoYW5nZTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRDb29yZHModmFsdWU6IENvb3Jkcykge1xuICAgIHRoaXMuX2Nvb3JkcyA9IHZhbHVlO1xuICAgIHRoaXMuX2Nvb3Jkc0NoYW5nZS5uZXh0KHRoaXMuZ2V0Q29vcmRzKCkpO1xuICB9XG5cbiAgcHVibGljIGdldENvb3JkcygpIHtcbiAgICByZXR1cm4gdGhpcy5fY29vcmRzO1xuICB9XG5cbiAgcHVibGljIGNvb3Jkc1dhc0NoYW5nZWQoKTogT2JzZXJ2YWJsZTxDb29yZHM+IHtcbiAgICByZXR1cm4gdGhpcy5fY29vcmRzQ2hhbmdlO1xuICB9XG5cbiAgcHJvdGVjdGVkIGNvbnZlcnRUb1JHQkEoKSB7XG4gICAgdGhpcy5fcmdiYUNvbG9yID0gdGhpcy5nZXRTZWdtZW50ZWRDb2xvcigpLnNwbGl0KCcsJyk7XG4gICAgY29uc3QgYWxwaGFDaGFubmVsID0gdGhpcy5nZXRBbHBoYSgpO1xuICAgIHRoaXMuX3JnYmFTZWdtZW50c1swXSA9IHRoaXMuX3JnYmFDb2xvclswXTtcbiAgICB0aGlzLl9yZ2JhU2VnbWVudHNbMV0gPSB0aGlzLl9yZ2JhQ29sb3JbMV07XG4gICAgdGhpcy5fcmdiYVNlZ21lbnRzWzJdID0gdGhpcy5fcmdiYUNvbG9yWzJdO1xuICAgIHRoaXMuX3JnYmFTZWdtZW50c1szXSA9IGFscGhhQ2hhbm5lbDtcbiAgICByZXR1cm4gJ3JnYmEoJyArIHRoaXMuX3JnYmFTZWdtZW50cy50b1N0cmluZygpICsgJyknO1xuICB9XG5cbiAgcHVibGljIGdldFJnYmFDb2xvcigpIHtcbiAgICByZXR1cm4gdGhpcy5jb252ZXJ0VG9SR0JBKCk7XG4gIH1cblxuICBwdWJsaWMgZ2V0SGV4Q29sb3IoKSB7XG4gICAgcmV0dXJuIHRoaXMucmdiYVRvSGV4KHRoaXMuZ2V0U2VnbWVudGVkQ29sb3IoKSArICcsJyArIHRoaXMuZ2V0QWxwaGEoKSk7XG4gIH1cblxuICBwdWJsaWMgcmdiYVRvSGV4KHZhbHVlOiBhbnkpIHtcbiAgICB2YWx1ZSA9IHZhbHVlLm1hdGNoKC9ecmdiYT9bXFxzK10/XFwoW1xccytdPyhcXGQrKVtcXHMrXT8sW1xccytdPyhcXGQrKVtcXHMrXT8sW1xccytdPyhcXGQrKVtcXHMrXT8vaSk7XG4gICAgcmV0dXJuICh2YWx1ZSAmJiB2YWx1ZS5sZW5ndGggPT09IDQpID8gJyMnICtcbiAgICAgICgnMCcgKyBwYXJzZUludCh2YWx1ZVsxXSwgMTApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTIpICtcbiAgICAgICgnMCcgKyBwYXJzZUludCh2YWx1ZVsyXSwgMTApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTIpICtcbiAgICAgICgnMCcgKyBwYXJzZUludCh2YWx1ZVszXSwgMTApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTIpIDogJyc7XG4gIH1cblxuICBwdWJsaWMgaGV4VG9SZ2JhKHZhbHVlOiBzdHJpbmcsIGFscGhhPzogc3RyaW5nKSB7XG4gICAgY29uc3QgciA9IHBhcnNlSW50KHZhbHVlLnNsaWNlKDEsIDMpLCAxNik7XG4gICAgY29uc3QgZyA9IHBhcnNlSW50KHZhbHVlLnNsaWNlKDMsIDUpLCAxNik7XG4gICAgY29uc3QgYiA9IHBhcnNlSW50KHZhbHVlLnNsaWNlKDUsIDcpLCAxNik7XG5cbiAgICBpZiAoYWxwaGEpIHtcbiAgICAgIHJldHVybiBgcmdiYSgke3J9LCAke2d9LCAke2J9LCAke2FscGhhfSlgO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gYHJnYigke3J9LCAke2d9LCAke2J9KWA7XG4gICAgfVxuICB9XG5cbiAgY29uc3RydWN0b3IoKSB7IH1cbn1cbiJdfQ==